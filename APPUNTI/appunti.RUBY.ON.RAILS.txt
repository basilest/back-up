3 THINGS REQUIRED                 .  ruby:     ruby -v
                                  .  gem:      gem -v
                                  .  rails:    rails -v     <-- installed using ex RubyGems, included with Ruby.
                                  .   This will provide a command line > rails
                                  .   with many subcommands (ex.         rails server    <--- runs a development WEB server)
                                  .
                                  .
 gem                              .  gem list <gem name>    command line to know the versions of every gem
                                  .  note: gems for Ruby on Rails have the same version number of Rails
                                  .        ex. Rails 5.1 --> sub-gems are 5.1
                                  .
MVC                               .  Model-View-Controller: paradigm to keep separate the logically different parts of the application.
                                  .
                                  .        Model:  defines the code that interacts with the DB tables.
                                  .                Domain logic: includes things such as validation
                                  .
                                  .        Controllers: Theyâ€™re the layers user <---> DB.
                                  .                They call methods on the model classes, (which return DB data).
                                  .                and they RENDER it to the user.
                                  .
                                  .        View:   The HTML-TEMPLATEs (like in Perl, but in ruby it's used the Embedded Ruby (ERB))
                                  .                which allows to use RUBY inside the page.
                                  .
                                  .
CONVENTION OVER CONFIGURATION     .  every Ruby on Rails application relies on a standard directory structure and files.
                                  .  ex:
                                  .                     ./stef1.app/Gemfile        file with the versions of Gems required
                                  .                     ./   "     /Rakefile       Makefile
                                  .                     ./   "     /assets/        dir  root for CSS / Javascript/....
                                  .                     ./   "     /bin/           dir for the binary
                                  .                     ./   "     /library/       dir for libraries
                                  .                     ./   "     /db/            dir for DB files
                                  .                     ./   "     /config/        dir for configuration
                                  .                     ./   "     /test/          dir for test
                                  .                     ./   "     /....
                                  .                 >   ./   "     /models
                                  .                 >   ./   "     /views
                                  .                 >   ./   "     /controllers
                                  .                     ./   "     /helpers       dir for special compex formatting
                                  .                     ./   "     /mailers       dir to put modules which manage the email sending
                                  .
                                  .
REST                              .  Representational State Transfer (REST) is the CONVENTION for routing in Rails.
     (Restfull)                   .  (routing = how URLs are mapped onto the controller-actions (that should process the form))
                                  .  If a MVC application adheres to the REST paradigm is said RestFULL
                                  .
 ENVIRONMENTS                     .  Rails defines 3 ways (or envs) to execute my application:
                                  .                1. development  (usually classes not cached: so every change doesn't require a server RESTART)
                                  .                2. production.  (classes cached)
                                  .                3. test
                                  .
                                  .
                                  .
JAVASCRIPT LIBRARIES              .  extensive use of JavaScript libraries: jQuery and Script.aculo.us, for scripting Ajax actions.
                                  .
                                  .  CoffeeScript was introduced in Rails 3.1 as the default JavaScript language.
                                  .
HTML / XML                        .  both HTML and XML are supported as standard output formats. XML is the facility for RESTful web services.
                                  .
                                  .
CSS  / SASS                       .  SASS is the standard for CSS templating
                                  .  (Syntactically Awesome Style Sheets) is a CSS extension with things like variables, nested rules, inline imports and more.
                                  .
                                  .

RUN A PROG
                                  .
                                  .   $0      The name of the script
                                  .   $*      The command line arguments used to invoke the script
                                  .
                                  .   $/      The input record separator
                                  .   $\      The output record separator
                                  .   $_      The string last read by gets
                                  .
                                  .   $?      The exit status of last executed child process
                                  .   $$      The Ruby interpreter's process ID
                                  .
                                  .   $.      The line number last read by interpreter
                                  .   $@      The location of latest error
                                  .
                                  .   $&      The string last matched by regexp
                                  .   $~      The last regexp match, as an array of subexpressions
                                  .   $n      The nth subexpression in the last match (same as $~[n])
                                  .
                                  .   $=      The case-insensitivity flag
                                  .
                                  .
                                  .           DB Table                    Ruby file
                                  .           __________                 __________                    __________                 __________
                                  .          |__________|               |          |                  |          |               |          |
                                  .          |__       _|    model      |          |                  |          |               |          |
                                  .          |_ users __|  <-------->   | user.rb  |                  |          |               |          |
                                  .          |__________|               |          |                  |          |               |          |
                                  .          |__________|               |          |                  |          |               |          |
                                  .          |__________|               |__________|                  |__________|               |__________|
                                  .
                                  .                     model: maps
                                  .                            1 Ruby file to
                                  .                            1 DB Table
                                  .
                                  .                     view: HTML template files (usually erb files)
                                  .
                                  .
                                  .                     controller: Back-End component
                                  .                                 to render a Ruby file.
                                  .                                     scaffold :model_name   <--- line added in the controller
                                  .                                                                 Rails will generate run time all the appropriate
                                  .                                                                 DB interface (so no way to customize)
                                  .
                                  .                                     rails generate scaffold model_name   <--- external command to generate/save
                                  .                                                                               the Ruby code (so I can customize
                                  .                                                                               but I lose the run-time flexibility)
                                  .
                                  .
                                  .                             ex. of a controller (in dir my_app/controllers/ )
                                  .                                 file called cccccc_controller.rb

                                  .                             my_app/controllers/stef1_controller.rb

                                  .                                 class ApplicationController < ActionController::Base
                                  .                                     protect_from_forgery with: :exception
                                  .                                     def hello
                                  .                                         render html: "hello, world!"
                                  .                                     end
                                  .                                 end
                                  .
                                  .
                                  .                     router: it's like the Apache config to specify how to redirect
                                  .                             the URL onto a BE controller
                                  .                             and return the requested page
                                  .
                                  .                     (my_app/config/routes.rb)
                                  .
                                  .                             root 'controller_name#action_name'
                                  .                                         ^              ^
                                  .                                   controller        function name
                                  .                                  (file name)   (inside controller class)
                                  .
                                  .                     usually inside a 'loop' ....do:
                                  .
                                  .                         Rails.stef1.routes.draw do
                                  .                                root 'stef1#hello'
                                  .                         end

                                  .
 BUNDLER                          .  After creating a new Rails application,
                                  .  the next step is to use Bundler to install and include the gems needed by the app.
                                  .
                                  .       bundle install        (ex:   cd my_app/   &&  bundle install)
                                  .
                                  .  bundle update     (to update bundle itself)
                                  .
                                  .  Bundler checks in the Gemfile the gem & versions to pack
                                  .  (with no version --> BuURL http://localhost:3000ndler will automatically install the latest version of the gem)
                                  .
                                  .  ex of Gemfile:
                                  .                      gem 'sqlite3'                         will install LATEST
                                  .                      gem 'uglifier', '>= 1.3.0'            will install LATEST if it's >=
                                  .                      gem 'coffee-rails', '~> 4.0.0'        will install LATEST if > 4.0.0 && < 4.1
                                  .                                                            ~> ONLY accepts increments of the LAST number 4.0.0
                                  .                                                                                                              ^
                                  .                             ...
                                  .

 rails server                     .  runs my application       (ex cd my_app && rails server)
                                  .                         note 1.  run in a separate shell, as it doesn't return
                                  .                         note 2.  see my_app in the browser: http://localhost:3000
                                  .

 WEBrick                          .  a simple Ruby web server
                                  .
                                  .

routes.rb                         .  config file to map incoming requests / routes  <---> controllers
                                  .
                                  .
                                  .

Rake                              .  A build tool, distributed as a gem
                                  .
                                  .

mintest                           .  the default Rails testing framework
                                  .
                                  .


Heroku                            .  It's a cmd line utility that (like Jenkins) deploys the app.
                                  .
                                  .                  heroku --version
                                  .
                                  .  Heroku uses the PostgreSQL database     <-- so we need 'pg' gem
                                  .  The Gemfile read by Bundler will have this section:
                                  .
                                  .         group :production do
                                  .            gem 'pg', '0.20.0'
                                  .         end
                                  .
                                  .  Heroku doesn't support instead SQLite (which is usually used during development)
                                  .  The Gemfile will have this section:
                                  .
                                  .         group :development, :test do
                                  .            gem 'sqlite3', '1.3.13'
                                  .            gem 'byebug', '9.0.6', platform: :mri
                                  .         end
                                  .
                                  .  When Building (bundle install)
                                  .  to avoid to deploy 1 section (ex. in developmeny I don't want production)
                                  .  so I run:
                                  .             bundle install --without production

                                  .
                                  .

SCAFFOLDING                       .
                                  .  1.    new:      rails new stef1.app
                                  .
                                  .                  this command creates a dir ./stef1.app
                                  .                  with a full BIG subtree of files (nb. it requires the network
                                  .                  connection to download some required componenets)
                                  .                  important dir or files are:
                                  .                     ./stef1.app/Gemfile        file with the versions of Gems required
                                  .                     ./   "     /Rakefile       Makefile
                                  .                     ./   "     /assets/        dir  root for CSS / Javascript/....
                                  .                     ./   "     /bin/           dir for the binary
                                  .                     ./   "     /library/       dir for libraries
                                  .                     ./   "     /db/            dir for DB files
                                  .                     ./   "     /config/        dir for configuration ex:
                                  .                                                (config/routes.rb (routing) config/database.yml  (ex user& password for SQLite)
                                  .                     ./   "     /test/          dir for test
                                  .                     ./   "     /....
                                  .                 >   ./   "     /models
                                  .                 >   ./   "     /views
                                  .                 >   ./   "     /controllers
                                  .                 >   ./   "     /helpers       dir for special compex formatting
                                  .                 >   ./   "     /mailers       dir to put modules which manage the email sending
                                  .
                                  .  2.    [bundle update]
                                  .                  Optional command
                                  .
                                  .  3.    bundle install
                                  .                  create the binary
                                  .
                                  .  4.    Gemfile: edit the ./stef1.app/Gemfile
                                  .
                                  .                  ex:
                                  .                      gem 'rails', '5.1.4'
                                  .                      gem 'puma',
                                  .                      gem 'sass-rails',
                                  .                      gem 'uglifier',
                                  .                      gem 'coffee-rails',
                                  .                      group :development, :test do
                                  .                            gem 'sqlite3', '1.3.13'
                                  .                            gem 'byebug', '9.0.6', platform: :mri
                                  .                      end
                                  .                      group :development do gem 'web-console',
                                  .                            '3.9.1'
                                  .                            '5.0.6' '3.2.0'
                                  .                            '3.5.1' '3.1.5'
                                  .                            gem 'listen',
                                  .                            gem 'spring',
                                  .                            gem 'spring-watcher-listen', '2.0.1'
                                  .                      end
                                  .                      group :production do gem 'pg', '0.20.0'
                                  .                      end
                                  .
                                  .  5.    cd ./stef1.app && rails server        <-- runs the WEB server (on local address / port 3000 : http://localhost:3000
                                  .
                                  .
                                  .  rails generate scaffold purchase name:string cost:decimal          generate scaffold  1         2          3
                                  .  rails g         <--- shortcut for generate                                          model    controller  views,
                                  .
  MIGRATIONS                      .  are the DB versions (timestamped)
                                  .  Usually there is a list of files db/migrate/[date]_create_[my DB table name].rb    (ex db/migrate/[date]_create_purchase.rb
                                  .  ex:
                                  .             class CreatePurchases < ActiveRecord::Migration
                                  .                 def change  <---- function 1/1 for simple cases (up & down are easy to guess)
                                  .                             create_table :purchases do |t|
                                  .                                    t.string :name
                                  .                                    t.decimal :cost
                                  .                                    t.timestamps null: false
                                  .                             end
                                  .                 end
                                  .
                                  .                 def up     <---- function 1/2 to manage do & redo
                                  .                 end
                                  .
                                  .                 def down   <---- function 2/2 to manage do & redo
                                  .                 end
                                  .             end
                                  .                 .
          RUN MIGRATION           .    > bundle exec rake db:migrate    <-- to do the migrate:   it creates a new version of the DB (and timestamped the file)
                                                                                       it calls the change function (or the up function)
                                  .    > bundle exec rake db:rollback   <-- to undo:   it calls the down function
                                                                                       or guesses the opposite commands of the 'change'
                                  .
                                  .    > bundle exec rake db:rollback STEP=3           It rollbacks 3 times (instead of calling db:rollback 3 times)
                                  .
          db/schema.rb            .    stores the last MIGRATION executed   (look in the section: ActiveRecord::Schema.define(version: [timestamp]) do ...)

                                  .
                                  .    > bundle exec rake db:schema:load               to restore the last known DB state
                                  .
                                  .
  DB Tables-user-interactions     .    Going to http://localhost:3000/[table_name]    (ex. http://localhost:3000/purchase)
                                  .    I see a generated HTML with prepared links to ADD new rows (ex. New [table name]  (ex "New Purchase")
                                  .    If I click the link the form to fill the column values
                                  .    are rendered by the TEMPLATE: [app]/views/[Table name]/new.html.erb,   (ex.[app]/views/purchases/new.html.erb )

                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
AUTOMATIC TESTING
                                  . 2 testing tools
                                  .     . MinitTest                 . test-driven development (TDD): tests the UNIT of CODE
                                  .     . RSpec or ( Cucumber )     . behavior-driven development (BDD) : test how more UNITs of code works togethecode works togetherr
                                  .
                                  .             TDD with MiniTest:
                                  .
                                  .                  1. write 1 FAILING test case first  (red)
                                  .                  2. write the CODE to make the test pass  (green)
                                  .                  3. refactor the code to make it cleaner  (refactor)
                                  .
                                  .                  The above approach is called  red-green-refactor
                                  .

                                  . The first testing library for Ruby was
                                  .                 Test::Unit, ( back in 2000 and
                                  .                               now part of the Ruby standard library ).
                                  .
                                  . In Rails 4, it has been superseded by MiniTest, ( also part of the Ruby standard library ).
                                  .
                                  .  example:  ____________________________________________________
                                  .            |    require "minitest/autorun"
                                  .            |
                                  .            |    class ExampleTest < Minitest::Test   <--- derived from this allows to have run any method whose name starts with 'test'
                                  .            |      def test_truth                                 <--- in a file  <__some_dir__>/basilest1_test.rb
                                  .            |          assert true
                                  .            |      end
                                  .            |    end
                                  .            |___________________________________________________
                                  .
                                  .
                                  .  run the example:      from the command line:
                                  .                            > cd __some_dir__ && ruby basilest1_test.rb
                                  .
                                  .  common output:
                                  .                        Finished in 0.001245s, 803.2129 runs/s, 803.2129 assertions/s.
                                  .                        1 runs, 1 assertions, 0 failures, 0 errors, 0 skips
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
NUMBERS
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
                                  .
